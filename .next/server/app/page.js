(()=>{var e={};e.id=974,e.ids=[974],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1541:(e,r,t)=>{"use strict";t.r(r),t.d(r,{"005878bd7b9ec5d068ff7492ff20cd2b41dce8f051":()=>h,"00712e5c9e112a6647018f4f8b4ca2d66c7cb4112b":()=>k.Rf,"00e2b3fd2ba70015d4c2b345d70998b495bb724728":()=>l,"00e545f6d514b9ccb19d9858bd8667bf9ca9117458":()=>c,"00fb8a0b5f97d6aff80fb5f2dbe620e93a72b8abf4":()=>N.Iu,"4027d79fa448c59c031b694594791dffb266b2ed84":()=>k.fn,"402bd90681f9fef537914d5515a2fad93583bde6c9":()=>f,"402f5c7634e945269b23ddcd80034b75f5ad0bc6a6":()=>j,"403355c2bca24eec20cae393083927b45bfee7e10e":()=>x,"4039fc041f2064dc89617f96e7c30ac11af57525f0":()=>p,"403bf1e5d088d6a04aed921b8bfc71258983d09842":()=>k.FP,"4046a5d9c084c147454b384f3ad38c9fb0c048727b":()=>b,"40490c01570a492dfca4ae3b1fa5d86ed66ac7d1cf":()=>m,"405ddf3ec88f65735f73c1ee2e3c8fc88d7ecfba1e":()=>y,"406806f09dcc4fd6dc29f0432c3612c1dd69c6dfe3":()=>N.xD,"408f939bedfe9f3e39cd7c19621057299c9af63be4":()=>k.UZ,"409c19e64ec99ea8a4caf3e8cf8a69a1b7ddbda215":()=>k.xt,"409f18f97b054ceb3a1d7fa30a1ae158ab0d2e4189":()=>k.Ud,"40ac42374f9a46a1df78a458f6f4e10e45e4698e5b":()=>k.ff,"40ae230592c0bea19cc94f85ed964cfd13484572fa":()=>v,"40b28159295fe987b57870d19b8e99b4c198fca5c8":()=>k.Gk,"40b4819b2b22612ed7644a79ccde8753d5decc2e37":()=>N.Hm,"40b7d73982af3ed829b2327312b47a2555723042c1":()=>w,"40be4571c72b72887bba9d6fcf300b23e2327e05c4":()=>d,"40e00994b19f3f790f637c0c2072370762932feb6b":()=>u,"40ec8e4f82d1ed332b1bf9d87f5b45ba4bd73d4aae":()=>n,"40edfb554ffc2f4a054fdd4ca6498fd99b39071d21":()=>k.w0,"40f05baf1df05e97cad796705dc11e8e239525e321":()=>N.id,"40f34cf53a1224b3253e5980ce9652ace35481a305":()=>N.cJ,"40fcd747120242de1f8cbcda2aa39ef6327b55f509":()=>N.tG,"604cff86cd50f693c8e42b6b8daf7313e61764fe3f":()=>N.tY,"60b2c68a71dcec78398ebf2868fcbba94bd3d8061a":()=>g,"70e9653fbc4c26e24741071a3c2a4e3dd472600158":()=>i});var a=t(1829);t(129);var s=t(6678);async function l(){let e="AIzaSyDELGlRw8diLuPUz9v1tQ9mTsFDvDil8-I";return e?{hasValidKey:!0,scriptUrl:`https://maps.googleapis.com/maps/api/js?key=${e}&libraries=geometry,places,drawing&callback=initMap&loading=async`}:{hasValidKey:!1,error:"Google Maps API key is missing. Please add your API key to the .env.local file."}}async function i(e,r,t=0){let a="AIzaSyDELGlRw8diLuPUz9v1tQ9mTsFDvDil8-I";if(!a)return"/placeholder.svg?height=300&width=600";let s=new URLSearchParams({size:"600x400",location:`${e},${r}`,heading:t.toString(),pitch:"10",fov:"90",key:a});return`https://maps.googleapis.com/maps/api/streetview?${s.toString()}`}(0,s.D)([l,i]),(0,a.A)(l,"00e2b3fd2ba70015d4c2b345d70998b495bb724728",null),(0,a.A)(i,"70e9653fbc4c26e24741071a3c2a4e3dd472600158",null);var o=t(8346);async function n(e){try{return await o.bc.upsert({id:e.id,name:e.name,color:e.color,coordinates:e.coordinates,createdAt:new Date,updatedAt:new Date})}catch(e){throw console.error("Error creating territory:",e),Error("Failed to create territory")}}async function c(){try{return await o.bc.findAll()}catch(e){throw console.error("Error fetching territories:",e),Error("Failed to fetch territories")}}async function d(e){try{return await o.bc.findById(e)}catch(e){throw console.error("Error fetching territory:",e),Error("Failed to fetch territory")}}async function p(e){try{return await o.bc.update(e.id,{name:e.name,color:e.color,coordinates:e.coordinates})}catch(e){throw console.error("Error updating territory:",e),Error("Failed to update territory")}}async function u(e){try{await o.bc.delete(e)}catch(e){throw console.error("Error deleting territory:",e),Error("Failed to delete territory")}}async function m(e){try{await o.bc.upsert(e)}catch(e){throw console.error("Error saving territory:",e),Error("Failed to save territory")}}async function x(e){try{return await o.jS.create({...e,status:e.status||"scheduled"})}catch(e){throw console.error("Error creating follow-up:",e),Error("Failed to create follow-up")}}async function h(){try{return await o.jS.findAll()}catch(e){throw console.error("Error fetching follow-ups:",e),Error("Failed to fetch follow-ups")}}async function f(e){try{return await o.jS.findById(e)}catch(e){throw console.error("Error fetching follow-up:",e),Error("Failed to fetch follow-up")}}async function b(e){try{return await o.jS.findByPinId(e)}catch(e){throw console.error("Error fetching follow-ups for pin:",e),Error("Failed to fetch follow-ups for pin")}}async function g(e,r){try{return await o.jS.findByDateRange(e,r)}catch(e){throw console.error("Error fetching follow-ups by date range:",e),Error("Failed to fetch follow-ups by date range")}}async function y(e){try{return await o.jS.update(e.id,{pinId:e.pinId,address:e.address,propertyName:e.propertyName,date:e.date,time:e.time,notes:e.notes,status:e.status})}catch(e){throw console.error("Error updating follow-up:",e),Error("Failed to update follow-up")}}async function v(e){try{await o.jS.delete(e)}catch(e){throw console.error("Error deleting follow-up:",e),Error("Failed to delete follow-up")}}async function w(e){try{await o.jS.upsert(e)}catch(e){throw console.error("Error saving follow-up:",e),Error("Failed to save follow-up")}}async function j(e){try{return await o.jS.upsert({id:e.id,pinId:e.pinId,address:e.address,propertyName:e.propertyName,date:e.date,time:e.time,notes:e.notes,status:e.status||"scheduled",createdAt:e.timestamp||new Date,updatedAt:new Date})}catch(e){throw console.error("Error saving follow-up data:",e),Error("Failed to save follow-up data")}}(0,s.D)([n,c,d,p,u,m]),(0,a.A)(n,"40ec8e4f82d1ed332b1bf9d87f5b45ba4bd73d4aae",null),(0,a.A)(c,"00e545f6d514b9ccb19d9858bd8667bf9ca9117458",null),(0,a.A)(d,"40be4571c72b72887bba9d6fcf300b23e2327e05c4",null),(0,a.A)(p,"4039fc041f2064dc89617f96e7c30ac11af57525f0",null),(0,a.A)(u,"40e00994b19f3f790f637c0c2072370762932feb6b",null),(0,a.A)(m,"40490c01570a492dfca4ae3b1fa5d86ed66ac7d1cf",null),(0,s.D)([x,h,f,b,g,y,v,w,j]),(0,a.A)(x,"403355c2bca24eec20cae393083927b45bfee7e10e",null),(0,a.A)(h,"005878bd7b9ec5d068ff7492ff20cd2b41dce8f051",null),(0,a.A)(f,"402bd90681f9fef537914d5515a2fad93583bde6c9",null),(0,a.A)(b,"4046a5d9c084c147454b384f3ad38c9fb0c048727b",null),(0,a.A)(g,"60b2c68a71dcec78398ebf2868fcbba94bd3d8061a",null),(0,a.A)(y,"405ddf3ec88f65735f73c1ee2e3c8fc88d7ecfba1e",null),(0,a.A)(v,"40ae230592c0bea19cc94f85ed964cfd13484572fa",null),(0,a.A)(w,"40b7d73982af3ed829b2327312b47a2555723042c1",null),(0,a.A)(j,"402f5c7634e945269b23ddcd80034b75f5ad0bc6a6",null);var N=t(6132),k=t(3831)},2135:(e,r,t)=>{"use strict";t.d(r,{i:()=>s});var a=t(7001);let s=(0,a.createServerReference)("40f05baf1df05e97cad796705dc11e8e239525e321",a.callServer,void 0,a.findSourceMapURL,"getPin")},2422:(e,r,t)=>{"use strict";t.d(r,{t:()=>s});var a=t(7001);let s=(0,a.createServerReference)("604cff86cd50f693c8e42b6b8daf7313e61764fe3f",a.callServer,void 0,a.findSourceMapURL,"updatePinStatus")},2980:(e,r,t)=>{"use strict";t.d(r,{x:()=>s});var a=t(7001);let s=(0,a.createServerReference)("406806f09dcc4fd6dc29f0432c3612c1dd69c6dfe3",a.callServer,void 0,a.findSourceMapURL,"savePin")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3685:(e,r,t)=>{"use strict";t.d(r,{c:()=>s});var a=t(7001);let s=(0,a.createServerReference)("40f34cf53a1224b3253e5980ce9652ace35481a305",a.callServer,void 0,a.findSourceMapURL,"createPin")},3873:e=>{"use strict";e.exports=require("path")},4266:(e,r,t)=>{"use strict";t.d(r,{H:()=>s});var a=t(7001);let s=(0,a.createServerReference)("40b4819b2b22612ed7644a79ccde8753d5decc2e37",a.callServer,void 0,a.findSourceMapURL,"updatePin")},4761:(e,r,t)=>{Promise.resolve().then(t.bind(t,9225))},5665:(e,r,t)=>{"use strict";t.d(r,{I:()=>s});var a=t(7001);let s=(0,a.createServerReference)("00fb8a0b5f97d6aff80fb5f2dbe620e93a72b8abf4",a.callServer,void 0,a.findSourceMapURL,"getAllPins")},5970:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>re});var a=t(5781),s=t(3072),l=t(7439),i=t(3759),o=t(7990),n=t(7401);let c=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...l},o)=>{let d=s?i.DX:"button";return(0,a.jsx)(d,{className:(0,n.cn)(c({variant:r,size:t,className:e})),ref:o,...l})});d.displayName="Button";let p=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...r}));p.displayName="Card";let u=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...r}));u.displayName="CardHeader";let m=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...r}));m.displayName="CardTitle",s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",e),...r})).displayName="CardDescription";let x=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",e),...r}));x.displayName="CardContent",s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",e),...r})).displayName="CardFooter";let h=(0,o.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function f({className:e,variant:r,...t}){return(0,a.jsx)("div",{className:(0,n.cn)(h({variant:r}),e),...t})}var b=t(2752);let g=(0,b.A)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),y=(0,b.A)("UserX",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"17",x2:"22",y1:"8",y2:"13",key:"3nzzx3"}],["line",{x1:"22",x2:"17",y1:"8",y2:"13",key:"1swrse"}]]),v=(0,b.A)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),w=(0,b.A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var j=t(984);let N=(0,b.A)("Wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),k=(0,b.A)("WifiOff",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),S=(0,b.A)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),C=(0,b.A)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),A=(0,b.A)("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),M=(0,b.A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),P=s.forwardRef(({className:e,type:r,...t},s)=>(0,a.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:s,...t}));P.displayName="Input";var E=t(4289),R=s.forwardRef((e,r)=>(0,a.jsx)(E.sG.label,{...e,ref:r,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));R.displayName="Label";let L=(0,o.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),F=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(R,{ref:t,className:(0,n.cn)(L(),e),...r}));F.displayName=R.displayName;let U=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:t,...r}));U.displayName="Textarea";var D=t(7997),T=t(5605),z=t(5271),I=t(9672),O=t(3078),$=t(8944),q="Checkbox",[H,G]=(0,T.A)(q),[V,Z]=H(q),_=s.forwardRef((e,r)=>{let{__scopeCheckbox:t,name:l,checked:i,defaultChecked:o,required:n,disabled:c,value:d="on",onCheckedChange:p,form:u,...m}=e,[x,h]=s.useState(null),f=(0,D.s)(r,e=>h(e)),b=s.useRef(!1),g=!x||u||!!x.closest("form"),[y=!1,v]=(0,I.i)({prop:i,defaultProp:o,onChange:p}),w=s.useRef(y);return s.useEffect(()=>{let e=x?.form;if(e){let r=()=>v(w.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[x,v]),(0,a.jsxs)(V,{scope:t,state:y,disabled:c,children:[(0,a.jsx)(E.sG.button,{type:"button",role:"checkbox","aria-checked":W(y)?"mixed":y,"aria-required":n,"data-state":K(y),"data-disabled":c?"":void 0,disabled:c,value:d,...m,ref:f,onKeyDown:(0,z.m)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,z.m)(e.onClick,e=>{v(e=>!!W(e)||!e),g&&(b.current=e.isPropagationStopped(),b.current||e.stopPropagation())})}),g&&(0,a.jsx)(Y,{control:x,bubbles:!b.current,name:l,value:d,checked:y,required:n,disabled:c,form:u,style:{transform:"translateX(-100%)"},defaultChecked:!W(o)&&o})]})});_.displayName=q;var B="CheckboxIndicator",X=s.forwardRef((e,r)=>{let{__scopeCheckbox:t,forceMount:s,...l}=e,i=Z(B,t);return(0,a.jsx)($.C,{present:s||W(i.state)||!0===i.state,children:(0,a.jsx)(E.sG.span,{"data-state":K(i.state),"data-disabled":i.disabled?"":void 0,...l,ref:r,style:{pointerEvents:"none",...e.style}})})});X.displayName=B;var Y=e=>{let{control:r,checked:t,bubbles:l=!0,defaultChecked:i,...o}=e,n=s.useRef(null),c=function(e){let r=s.useRef({value:e,previous:e});return s.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}(t),d=function(e){let[r,t]=s.useState(void 0);return(0,O.N)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let a,s;if(!Array.isArray(r)||!r.length)return;let l=r[0];if("borderBoxSize"in l){let e=l.borderBoxSize,r=Array.isArray(e)?e[0]:e;a=r.inlineSize,s=r.blockSize}else a=e.offsetWidth,s=e.offsetHeight;t({width:a,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}(r);s.useEffect(()=>{let e=n.current,r=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==t&&r){let a=new Event("click",{bubbles:l});e.indeterminate=W(t),r.call(e,!W(t)&&t),e.dispatchEvent(a)}},[c,t,l]);let p=s.useRef(!W(t)&&t);return(0,a.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:i??p.current,...o,tabIndex:-1,ref:n,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function W(e){return"indeterminate"===e}function K(e){return W(e)?"indeterminate":e?"checked":"unchecked"}let J=(0,b.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Q=s.forwardRef(({className:e,...r},t)=>(0,a.jsx)(_,{ref:t,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:(0,a.jsx)(X,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,a.jsx)(J,{className:"h-4 w-4"})})}));Q.displayName=_.displayName;var ee=t(3342),er=t(9252),et=t(229),ea=t(2484),es=t(529),el=t(7730),ei=t(5567),eo=t(6547);let en=(0,b.A)("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),ec=(0,b.A)("StickyNote",[["path",{d:"M16 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V8Z",key:"qazsjp"}],["path",{d:"M15 3v4a2 2 0 0 0 2 2h4",key:"40519r"}]]);function ed({pin:e,onSubmit:r,onCancel:t}){let[l,i]=(0,s.useState)(""),[o,n]=(0,s.useState)(""),[c,h]=(0,s.useState)(""),[b,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(""),[N,k]=(0,s.useState)(""),[S,C]=(0,s.useState)(""),[A,M]=(0,s.useState)(""),[E,R]=(0,s.useState)(!1),[L,D]=(0,s.useState)(!1),[T,z]=(0,s.useState)({}),I=()=>{let e={};return l.trim()||(e.firstName="First name is required"),o&&!/^\+?[\d\s\-()]{10,}$/.test(o.replace(/\s/g,""))&&(e.phone="Please enter a valid phone number"),c&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c)&&(e.email="Please enter a valid email address"),z(e),0===Object.keys(e).length},O=async()=>{c&&(D(!0),(0,ee.oR)({title:"Promo Material Sent!",description:`PulseChain educational materials have been sent to ${c}`}),setTimeout(()=>D(!1),3e3))},$=async t=>{if(t.preventDefault(),I()){R(!0);try{let t={firstName:l.trim(),phone:o.trim()||void 0,email:c.trim()||void 0,ownsCrypto:b,socials:{twitter:y.trim()||void 0,telegram:N.trim()||void 0,reddit:S.trim()||void 0},notes:A.trim()||void 0,pinId:e.id,address:e.address,timestamp:new Date};await new Promise(e=>setTimeout(e,1e3)),r(t)}catch(e){console.error("Error submitting onboard form:",e),(0,ee.oR)({title:"Error",description:"Failed to submit form. Please try again.",variant:"destructive"})}finally{R(!1)}}},q=e=>{let r=e.replace(/\D/g,"");return r.length>=6?`(${r.slice(0,3)}) ${r.slice(3,6)}-${r.slice(6,10)}`:r.length>=3?`(${r.slice(0,3)}) ${r.slice(3)}`:r},H=(e,r)=>{let t=e.replace(/^@/,"");return"twitter"===r?t=t.replace(/^(https?:\/\/)?(www\.)?(twitter\.com\/|x\.com\/)?/,""):"telegram"===r?t=t.replace(/^(https?:\/\/)?(www\.)?(t\.me\/)?/,""):"reddit"===r&&(t=t.replace(/^(https?:\/\/)?(www\.)?(reddit\.com\/u\/)?/,"")),t};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"relative w-full max-w-lg",children:[(0,a.jsx)(GlowingEffect,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm max-h-[90vh] overflow-y-auto border-purple-200 shadow-xl",children:[(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-lg",children:[(0,a.jsx)(w,{className:"h-5 w-5 text-green-600"}),"New Customer Onboarding"]}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:t,className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(er.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(x,{children:[(0,a.jsxs)("form",{onSubmit:$,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-3 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-600 mb-1",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Location"})]}),e.propertyName&&(0,a.jsx)("p",{className:"font-medium text-sm break-words",children:e.propertyName}),(0,a.jsx)("p",{className:"text-sm text-gray-700 break-words",children:e.address}),(0,a.jsx)(f,{variant:"outline",className:"mt-2 border-purple-200 text-purple-700",children:"New Customer"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"firstName",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(et.A,{className:"h-4 w-4"}),"First Name *"]}),(0,a.jsx)(P,{id:"firstName",type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Enter customer's first name",className:`border-purple-200 focus:border-purple-400 ${T.firstName?"border-red-500":""}`,required:!0}),T.firstName&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:T.firstName})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"phone",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(ea.A,{className:"h-4 w-4"}),"Phone Number (Optional)"]}),(0,a.jsx)(P,{id:"phone",type:"tel",value:o,onChange:e=>{n(q(e.target.value))},placeholder:"(555) 123-4567",className:`border-purple-200 focus:border-purple-400 ${T.phone?"border-red-500":""}`,maxLength:14}),T.phone&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:T.phone})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"email",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(es.A,{className:"h-4 w-4"}),"Email Address (Optional)"]}),(0,a.jsx)(P,{id:"email",type:"email",value:c,onChange:e=>h(e.target.value),placeholder:"customer@example.com",className:`border-purple-200 focus:border-purple-400 ${T.email?"border-red-500":""}`}),T.email&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:T.email})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(Q,{id:"ownsCrypto",checked:b,onCheckedChange:e=>g(e),className:"border-purple-300 data-[state=checked]:bg-purple-600"}),(0,a.jsxs)(F,{htmlFor:"ownsCrypto",className:"flex items-center gap-2 text-sm text-purple-700",children:[(0,a.jsx)(el.A,{className:"h-4 w-4"}),"Owns Cryptocurrency (Optional)"]})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(F,{className:"text-sm font-medium text-purple-700",children:"Social Media (Optional)"}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(F,{htmlFor:"twitter",className:"flex items-center gap-2 text-sm text-purple-600",children:[(0,a.jsx)(ei.A,{className:"h-4 w-4"}),"Twitter/X Handle"]}),(0,a.jsx)(P,{id:"twitter",type:"text",value:y,onChange:e=>v(H(e.target.value,"twitter")),placeholder:"username",className:"border-purple-200 focus:border-purple-400"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(F,{htmlFor:"telegram",className:"flex items-center gap-2 text-sm text-purple-600",children:[(0,a.jsx)(eo.A,{className:"h-4 w-4"}),"Telegram Handle"]}),(0,a.jsx)(P,{id:"telegram",type:"text",value:N,onChange:e=>k(H(e.target.value,"telegram")),placeholder:"username",className:"border-purple-200 focus:border-purple-400"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)(F,{htmlFor:"reddit",className:"flex items-center gap-2 text-sm text-purple-600",children:[(0,a.jsx)(eo.A,{className:"h-4 w-4"}),"Reddit Username"]}),(0,a.jsx)(P,{id:"reddit",type:"text",value:S,onChange:e=>C(H(e.target.value,"reddit")),placeholder:"username",className:"border-purple-200 focus:border-purple-400"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(d,{type:"button",variant:"outline",className:"w-full bg-transparent border-purple-200 text-purple-700 hover:bg-purple-50 text-sm",onClick:O,disabled:!c||L,children:[(0,a.jsx)(en,{className:"h-4 w-4 mr-2"}),L?"PulseChain Materials Sent!":"Send PulseChain Materials"]}),!c&&(0,a.jsx)("p",{className:"text-xs text-purple-600",children:"Email address required to send educational materials"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"notes",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(ec,{className:"h-4 w-4"}),"Add Note (Optional)"]}),(0,a.jsx)(U,{id:"notes",value:A,onChange:e=>M(e.target.value),placeholder:"Add any notes about this customer or interaction...",rows:3,className:"resize-none border-purple-200 focus:border-purple-400"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(d,{type:"button",variant:"outline",onClick:t,className:"flex-1 bg-transparent border-purple-200 text-purple-700 hover:bg-purple-50 text-sm",children:"Cancel"}),(0,a.jsx)(d,{type:"submit",disabled:E,className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-sm",children:E?"Processing...":"Onboard Now!"})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-purple-200",children:(0,a.jsxs)("p",{className:"text-xs text-purple-800",children:[(0,a.jsx)("strong",{children:"Note:"})," Only first name is required. All other fields are optional but help with PulseChain education follow-up and engagement."]})})]})]})]})})}var ep=t(3476);let eu=(0,b.A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var em=t(2991);function ex({pin:e,onSave:r,onCancel:t}){let[l,i]=(0,s.useState)(""),[o,n]=(0,s.useState)(""),[c,h]=(0,s.useState)(""),[b,g]=(0,s.useState)(!1),[y,w]=(0,s.useState)({}),N=new Date().toISOString().split("T")[0],k=()=>{let e={};return l||(e.date="Date is required"),o||(e.time="Time is required"),l&&new Date(l)<new Date(N)&&(e.date="Date cannot be in the past"),w(e),0===Object.keys(e).length},S=async t=>{if(t.preventDefault(),k()){g(!0);try{let t={id:Date.now().toString(),pinId:e.id,address:e.address,propertyName:e.propertyName,date:l,time:o,notes:c.trim()||void 0,timestamp:new Date};await new Promise(e=>setTimeout(e,800)),r(t),(0,ee.oR)({title:"Follow-up Scheduled!",description:`Appointment scheduled for ${new Date(l).toLocaleDateString()} at ${o}`})}catch(e){console.error("Error saving follow-up:",e),(0,ee.oR)({title:"Error",description:"Failed to schedule follow-up. Please try again.",variant:"destructive"})}finally{g(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-lg",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 text-blue-600"}),"Schedule Follow-up"]}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:t,className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(er.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(x,{children:[(0,a.jsxs)("form",{onSubmit:S,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-3 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-600 mb-1",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Location"})]}),e.propertyName&&(0,a.jsx)("p",{className:"font-medium text-sm break-words",children:e.propertyName}),(0,a.jsx)("p",{className:"text-sm text-gray-700 break-words",children:e.address}),(0,a.jsx)(f,{variant:"outline",className:"mt-2 border-blue-200 text-blue-700",children:"Follow-up Required"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"date",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(ep.A,{className:"h-4 w-4"}),"Date *"]}),(0,a.jsx)(P,{id:"date",type:"date",value:l,onChange:e=>i(e.target.value),min:N,className:`border-purple-200 focus:border-purple-400 ${y.date?"border-red-500":""}`,required:!0}),y.date&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:y.date})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"time",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),"Time *"]}),(0,a.jsx)(P,{id:"time",type:"time",value:o,onChange:e=>n(e.target.value),className:`border-purple-200 focus:border-purple-400 ${y.time?"border-red-500":""}`,required:!0}),y.time&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:y.time})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"notes",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(v,{className:"h-4 w-4"}),"Notes (Optional)"]}),(0,a.jsx)(U,{id:"notes",value:c,onChange:e=>h(e.target.value),placeholder:"Add any notes about this follow-up appointment...",rows:3,className:"resize-none border-purple-200 focus:border-purple-400"})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(d,{type:"button",variant:"outline",onClick:t,className:"flex-1 bg-transparent border-purple-200 text-purple-700 hover:bg-purple-50 text-sm",children:"Cancel"}),(0,a.jsxs)(d,{type:"submit",disabled:b,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-sm",children:[(0,a.jsx)(eu,{className:"h-4 w-4 mr-2"}),b?"Scheduling...":"Schedule Follow-up"]})]})]}),(0,a.jsx)("div",{className:"mt-4 p-3 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-purple-200",children:(0,a.jsxs)("p",{className:"text-xs text-purple-800",children:[(0,a.jsx)("strong",{children:"Tip:"})," Choose a convenient time for both you and the customer. You can add notes to remember specific details about this follow-up."]})})]})]})]})})}let eh=(0,b.A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),ef=(0,b.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),eb=(0,b.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function eg({followUps:e,onClose:r}){let[t,l]=(0,s.useState)(new Date),[i,o]=(0,s.useState)(null),n=r=>e.filter(e=>e.date===r),c=(e,r,t)=>`${e}-${String(r+1).padStart(2,"0")}-${String(t).padStart(2,"0")}`,h=e=>!!e&&n(c(t.getFullYear(),t.getMonth(),e)).length>0,b=e=>{if(!e)return;let r=c(t.getFullYear(),t.getMonth(),e);n(r).length>0&&o(r)},g=e=>{l(r=>{let t=new Date(r);return"prev"===e?t.setMonth(r.getMonth()-1):t.setMonth(r.getMonth()+1),t})},y=e=>{let[r,t]=e.split(":"),a=Number.parseInt(r);return`${a%12||12}:${t} ${a>=12?"PM":"AM"}`},w=(e=>{let r=e.getFullYear(),t=e.getMonth(),a=new Date(r,t,1),s=new Date(r,t+1,0).getDate(),l=a.getDay(),i=[];for(let e=0;e<l;e++)i.push(null);for(let e=1;e<=s;e++)i.push(e);return i})(t),N=i?n(i):[];return i?(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&o(null)},children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl max-h-[80vh] overflow-y-auto",children:[(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-base sm:text-lg",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 text-blue-600"}),(0,a.jsx)("span",{className:"truncate",children:new Date(i).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"})})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:()=>o(null),className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(eh,{className:"h-4 w-4"})}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:r,className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(er.A,{className:"h-4 w-4"})})]})]})}),(0,a.jsx)(x,{className:"space-y-4",children:0===N.length?(0,a.jsx)("p",{className:"text-center text-gray-500 py-8 text-sm",children:"No follow-ups scheduled for this day"}):N.map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(em.Z,{spread:20,glow:!0,disabled:!1,proximity:32,inactiveZone:.01}),(0,a.jsx)(p,{className:"border border-blue-200 bg-blue-50/50",children:(0,a.jsxs)(x,{className:"p-3 sm:p-4 space-y-2",children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)(f,{variant:"outline",className:"border-blue-300 text-blue-700 text-xs",children:[(0,a.jsx)(v,{className:"h-3 w-3 mr-1"}),y(e.time)]})}),(0,a.jsxs)("div",{children:[e.propertyName&&(0,a.jsx)("p",{className:"font-medium text-sm break-words",children:e.propertyName}),(0,a.jsxs)("div",{className:"flex items-start gap-1 text-sm text-gray-600",children:[(0,a.jsx)(j.A,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),(0,a.jsx)("span",{className:"break-words",children:e.address})]})]}),e.notes&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-600",children:"Notes:"}),(0,a.jsx)("p",{className:"text-sm text-gray-800 break-words",children:e.notes})]})]})})]},e.id))})]})]})}):(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-lg",children:[(0,a.jsx)(ep.A,{className:"h-5 w-5 text-blue-600"}),"Follow-up Calendar"]}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:r,className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(er.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>g("prev"),className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(ef,{className:"h-4 w-4"})}),(0,a.jsxs)("h3",{className:"text-base sm:text-lg font-semibold text-purple-700 truncate",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()]," ",t.getFullYear()]}),(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>g("next"),className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(eb,{className:"h-4 w-4"})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(e=>(0,a.jsx)("div",{className:"text-center text-xs font-medium text-gray-500 p-1 sm:p-2",children:e},e)),w.map((e,r)=>(0,a.jsx)("div",{className:`
                  relative text-center p-1 sm:p-2 text-sm cursor-pointer rounded-md transition-colors min-h-[32px] sm:min-h-[36px] flex items-center justify-center
                  ${e?"hover:bg-purple-50":""}
                  ${e&&h(e)?"bg-blue-50 border border-blue-200":""}
                `,onClick:()=>e&&b(e),children:e&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("span",{className:h(e)?"text-blue-700 font-medium":"text-gray-700",children:e}),h(e)&&(0,a.jsx)("div",{className:"absolute bottom-0.5 left-1/2 transform -translate-x-1/2",children:(0,a.jsx)("div",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})})]})},r))]}),(0,a.jsx)("div",{className:"flex items-center justify-center gap-4 text-xs text-gray-600 pt-2 border-t border-purple-100",children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),(0,a.jsx)("span",{children:"Has Follow-ups"})]})}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-3 rounded-lg border border-purple-200",children:(0,a.jsxs)("p",{className:"text-xs text-purple-800 text-center",children:[(0,a.jsx)("strong",{children:e.length})," total follow-ups scheduled"]})})]})]})]})})}let ey=(0,b.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);function ev(){let[e,r]=(0,s.useState)(!0),[t,a]=(0,s.useState)(!1),[l,i]=(0,s.useState)(!1),[o,n]=(0,s.useState)(null);return{isOnline:e,isInstallable:t,isInstalled:l,installApp:async()=>{if(!o)return!1;try{await o.prompt();let{outcome:e}=await o.userChoice;if("accepted"===e)return a(!1),n(null),!0;return!1}catch(e){return console.error("Error installing app:",e),!1}}}}function ew(){let{isInstallable:e,isInstalled:r,installApp:t}=ev(),[l,i]=(0,s.useState)(!1),[o,n]=(0,s.useState)(!1),c=async()=>{await t()&&i(!1)};return l&&e&&!r?(0,a.jsx)("div",{className:"fixed bottom-4 left-4 right-4 z-50 md:left-auto md:right-4 md:max-w-sm",children:(0,a.jsx)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl",children:(0,a.jsx)(x,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-2 rounded-lg",children:(0,a.jsx)("img",{src:"/pulsechain-logo.png",alt:"PulseChain",className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-1",children:"Install PulseChain Tracker"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Add to your home screen for quick access and offline use!"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d,{size:"sm",onClick:c,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:[(0,a.jsx)(ey,{className:"h-4 w-4 mr-1"}),"Install"]}),(0,a.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>{i(!1),n(!0),localStorage.setItem("pwa-install-dismissed","true")},children:[(0,a.jsx)(er.A,{className:"h-4 w-4 mr-1"}),"Not Now"]})]})]})]})})})}):null}var ej=t(7001);ej.callServer,ej.findSourceMapURL,ej.callServer,ej.findSourceMapURL;class eN{async init(){return new Promise((e,r)=>{let t=indexedDB.open(this.dbName,this.version);t.onerror=()=>r(t.error),t.onsuccess=()=>{this.db=t.result,e()},t.onupgradeneeded=e=>{let r=e.target.result;if(!r.objectStoreNames.contains("pins")){let e=r.createObjectStore("pins",{keyPath:"id"});e.createIndex("status","status",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}if(!r.objectStoreNames.contains("followUps")){let e=r.createObjectStore("followUps",{keyPath:"id"});e.createIndex("date","date",{unique:!1}),e.createIndex("pinId","pinId",{unique:!1})}if(!r.objectStoreNames.contains("customers")){let e=r.createObjectStore("customers",{keyPath:"pinId"});e.createIndex("firstName","firstName",{unique:!1}),e.createIndex("timestamp","timestamp",{unique:!1})}r.objectStoreNames.contains("sync")||r.createObjectStore("sync",{keyPath:"type"})}})}async savePin(e){this.db||await this.init();let r=this.db.transaction(["pins"],"readwrite").objectStore("pins");await r.put({...e,offline:!0})}async savePins(e){this.db||await this.init();let r=this.db.transaction(["pins"],"readwrite").objectStore("pins");for(let t of e)await r.put(t)}async getPins(){return this.db||await this.init(),new Promise((e,r)=>{let t=this.db.transaction(["pins"],"readonly").objectStore("pins").getAll();t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)})}async saveFollowUp(e){this.db||await this.init();let r=this.db.transaction(["followUps"],"readwrite").objectStore("followUps");await r.put({...e,offline:!0})}async getFollowUps(){return this.db||await this.init(),new Promise((e,r)=>{let t=this.db.transaction(["followUps"],"readonly").objectStore("followUps").getAll();t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)})}async saveCustomer(e){this.db||await this.init();let r=this.db.transaction(["customers"],"readwrite").objectStore("customers");await r.put({...e,offline:!0})}async getCustomers(){return this.db||await this.init(),new Promise((e,r)=>{let t=this.db.transaction(["customers"],"readonly").objectStore("customers").getAll();t.onsuccess=()=>e(t.result),t.onerror=()=>r(t.error)})}async getOfflineData(){this.db||await this.init();let[e,r,t]=await Promise.all([this.getPins(),this.getFollowUps(),this.getCustomers()]);return{pins:e.filter(e=>e.offline),followUps:r.filter(e=>e.offline),customers:t.filter(e=>e.offline)}}async markAsSynced(e,r){this.db||await this.init();let t=this.db.transaction([e],"readwrite").objectStore(e);for(let e of r){let r=t.get(e);r.onsuccess=()=>{let e=r.result;e&&(delete e.offline,t.put(e))}}}async clearAll(){this.db||await this.init();let e=this.db.transaction(["pins","followUps","customers","sync"],"readwrite");await Promise.all([e.objectStore("pins").clear(),e.objectStore("followUps").clear(),e.objectStore("customers").clear(),e.objectStore("sync").clear()])}constructor(){this.dbName="pulsechain-tracker",this.version=1,this.db=null}}let ek=new eN,eS=(0,b.A)("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),eC=(0,b.A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),eA=(0,b.A)("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),eM=(0,b.A)("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]),eP=(0,b.A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),eE=["#ef4444","#3b82f6","#22c55e","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1"];function eR({territories:e,onClose:r,onUpdateTerritory:t,onDeleteTerritory:l,onToggleTerritoryVisibility:i,visibleTerritories:o}){let[n,c]=(0,s.useState)(null),[h,b]=(0,s.useState)(""),[g,y]=(0,s.useState)(""),v=e=>{c(e.id),b(e.name),y(e.color)},w=()=>{if(!n||!h.trim())return;let r=e.find(e=>e.id===n);if(!r)return;let a={...r,name:h.trim(),color:g,updatedAt:new Date};t(a),c(null),b(""),y(""),(0,ee.oR)({title:"Territory Updated",description:`"${a.name}" has been updated successfully.`})},N=()=>{c(null),b(""),y("")},k=e=>{confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`)&&(l(e.id),(0,ee.oR)({title:"Territory Deleted",description:`"${e.name}" has been deleted.`,variant:"destructive"}))},S=e=>{if(e.length<3)return"0";let r=e.reduce((e,r)=>({minLat:Math.min(e.minLat,r.lat),maxLat:Math.max(e.maxLat,r.lat),minLng:Math.min(e.minLng,r.lng),maxLng:Math.max(e.maxLng,r.lng)}),{minLat:e[0].lat,maxLat:e[0].lat,minLng:e[0].lng,maxLng:e[0].lng});return(1e4*Math.abs((r.maxLat-r.minLat)*(r.maxLng-r.minLng))).toFixed(2)};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&r()},children:(0,a.jsxs)("div",{className:"relative w-full max-w-2xl",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-lg",children:[(0,a.jsx)(eS,{className:"h-5 w-5 text-blue-600"}),"Territory Manager"]}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:r,className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(er.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-3 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-600 mb-1",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Territory Overview"})]}),(0,a.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,a.jsx)("strong",{children:e.length})," territories created"]}),(0,a.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"Click the eye icon to show/hide territories on the map"})]}),0===e.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(eS,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),(0,a.jsx)("p",{className:"text-gray-500 mb-2",children:"No territories created yet"}),(0,a.jsx)("p",{className:"text-sm text-gray-400",children:"Click the drawing tools on the map to create your first territory"})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.map(e=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(em.Z,{spread:20,glow:!0,disabled:!1,proximity:32,inactiveZone:.01}),(0,a.jsx)(p,{className:"border border-gray-200",children:(0,a.jsx)(x,{className:"p-4",children:n===e.id?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F,{htmlFor:"edit-name",className:"text-sm font-medium text-purple-700",children:"Territory Name"}),(0,a.jsx)(P,{id:"edit-name",value:h,onChange:e=>b(e.target.value),placeholder:"Enter territory name",className:"border-purple-200 focus:border-purple-400"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(F,{className:"text-sm font-medium text-purple-700",children:"Territory Color"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:eE.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>y(e),className:`w-8 h-8 rounded-full border-2 transition-all ${g===e?"border-purple-500 scale-110":"border-gray-300 hover:border-purple-300"}`,style:{backgroundColor:e},title:e},e))})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(d,{size:"sm",onClick:w,disabled:!h.trim(),className:"bg-green-600 hover:bg-green-700 text-white",children:[(0,a.jsx)(eu,{className:"h-3 w-3 mr-1"}),"Save"]}),(0,a.jsx)(d,{size:"sm",variant:"outline",onClick:N,className:"border-gray-300 text-gray-700 hover:bg-gray-50 bg-transparent",children:"Cancel"})]})]}):(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-4 h-4 rounded-full border border-white shadow-sm",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900 break-words",children:e.name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["Created ",e.createdAt.toLocaleDateString(),e.updatedAt&&e.updatedAt!==e.createdAt&&(0,a.jsxs)("span",{children:[" • Updated ",e.updatedAt.toLocaleDateString()]})]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>i(e.id),className:"text-gray-600 hover:bg-gray-100",title:o.has(e.id)?"Hide territory":"Show territory",children:o.has(e.id)?(0,a.jsx)(eC,{className:"h-4 w-4"}):(0,a.jsx)(eA,{className:"h-4 w-4"})}),(0,a.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>v(e),className:"text-blue-600 hover:bg-blue-50",children:(0,a.jsx)(eM,{className:"h-4 w-4"})}),(0,a.jsx)(d,{size:"sm",variant:"ghost",onClick:()=>k(e),className:"text-red-600 hover:bg-red-50",children:(0,a.jsx)(eP,{className:"h-4 w-4"})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Points:"}),(0,a.jsx)("p",{className:"font-mono text-xs",children:e.coordinates.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Area (approx):"}),(0,a.jsxs)("p",{className:"font-mono text-xs",children:[S(e.coordinates)," units"]})]})]}),(0,a.jsx)("div",{className:"flex items-center gap-1",children:(0,a.jsx)(f,{variant:"outline",className:`text-xs ${o.has(e.id)?"border-green-300 text-green-700":"border-gray-300 text-gray-600"}`,children:o.has(e.id)?"Visible":"Hidden"})})]})})})]},e.id))}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-3 rounded-lg border border-purple-200",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm text-purple-700",children:"How to create territories:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs text-purple-800",children:[(0,a.jsx)("li",{children:"Click the polygon tool in the drawing controls"}),(0,a.jsx)("li",{children:"Click on the map to create polygon points"}),(0,a.jsx)("li",{children:"Double-click to complete the territory"}),(0,a.jsx)("li",{children:"Give your territory a name and choose a color"}),(0,a.jsx)("li",{children:"Use this manager to edit, hide, or delete territories"})]})]})]})]})]})})}let eL=(0,b.A)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),eF=["#ef4444","#3b82f6","#22c55e","#f59e0b","#8b5cf6","#ec4899","#06b6d4","#84cc16","#f97316","#6366f1"];function eU({coordinates:e,onSave:r,onCancel:t}){let[l,i]=(0,s.useState)(""),[o,n]=(0,s.useState)(eF[0]),[c,h]=(0,s.useState)({}),f=()=>{let e={};return l.trim()||(e.name="Territory name is required"),h(e),0===Object.keys(e).length};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(u,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-lg",children:[(0,a.jsx)(eS,{className:"h-5 w-5 text-blue-600"}),"Create Territory"]}),(0,a.jsx)(d,{variant:"ghost",size:"sm",onClick:t,className:"text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(er.A,{className:"h-4 w-4"})})]})}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 p-3 rounded-lg border border-purple-200",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-600 mb-1",children:[(0,a.jsx)(eS,{className:"h-4 w-4"}),(0,a.jsx)("span",{children:"Territory Details"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Points:"}),(0,a.jsx)("p",{className:"font-mono text-xs",children:e.length})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Area (approx):"}),(0,a.jsxs)("p",{className:"font-mono text-xs",children:[(()=>{if(e.length<3)return"0";let r=e.reduce((e,r)=>({minLat:Math.min(e.minLat,r.lat),maxLat:Math.max(e.maxLat,r.lat),minLng:Math.min(e.minLng,r.lng),maxLng:Math.max(e.maxLng,r.lng)}),{minLat:e[0].lat,maxLat:e[0].lat,minLng:e[0].lng,maxLng:e[0].lng});return(1e4*Math.abs((r.maxLat-r.minLat)*(r.maxLng-r.minLng))).toFixed(2)})()," units"]})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{htmlFor:"territory-name",className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(eS,{className:"h-4 w-4"}),"Territory Name *"]}),(0,a.jsx)(P,{id:"territory-name",type:"text",value:l,onChange:e=>i(e.target.value),placeholder:"Enter a name for this territory",className:`border-purple-200 focus:border-purple-400 ${c.name?"border-red-500":""}`,required:!0}),c.name&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:c.name})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(F,{className:"flex items-center gap-2 text-purple-700",children:[(0,a.jsx)(eL,{className:"h-4 w-4"}),"Territory Color"]}),(0,a.jsx)("div",{className:"grid grid-cols-5 gap-3",children:eF.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>n(e),className:`w-12 h-12 rounded-lg border-2 transition-all hover:scale-105 ${o===e?"border-purple-500 ring-2 ring-purple-300 scale-105":"border-gray-300 hover:border-purple-300"}`,style:{backgroundColor:e},title:e},e))}),(0,a.jsxs)("p",{className:"text-xs text-gray-600",children:["Selected color: ",o]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg border",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Preview:"}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 rounded border-2 border-white shadow-sm",style:{backgroundColor:o}}),(0,a.jsx)("span",{className:"text-sm font-medium",children:l||"Unnamed Territory"})]})]}),(0,a.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,a.jsx)(d,{type:"button",variant:"outline",onClick:t,className:"flex-1 bg-transparent border-purple-200 text-purple-700 hover:bg-purple-50 text-sm",children:"Cancel"}),(0,a.jsxs)(d,{type:"button",onClick:()=>{f()&&r(l.trim(),o)},disabled:!l.trim(),className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-sm",children:[(0,a.jsx)(eu,{className:"h-4 w-4 mr-2"}),"Create Territory"]})]}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-3 rounded-lg border border-purple-200",children:(0,a.jsxs)("p",{className:"text-xs text-purple-800",children:[(0,a.jsx)("strong",{children:"Tip:"})," Choose a descriptive name and distinct color for easy identification. You can edit or delete this territory later using the Territory Manager."]})})]})]})]})})}let eD=(0,ej.createServerReference)("40490c01570a492dfca4ae3b1fa5d86ed66ac7d1cf",ej.callServer,void 0,ej.findSourceMapURL,"saveTerritory"),eT=(0,ej.createServerReference)("00e545f6d514b9ccb19d9858bd8667bf9ca9117458",ej.callServer,void 0,ej.findSourceMapURL,"getAllTerritories"),ez=(0,ej.createServerReference)("40be4571c72b72887bba9d6fcf300b23e2327e05c4",ej.callServer,void 0,ej.findSourceMapURL,"getTerritory"),eI=(0,ej.createServerReference)("4039fc041f2064dc89617f96e7c30ac11af57525f0",ej.callServer,void 0,ej.findSourceMapURL,"updateTerritory"),eO=(0,ej.createServerReference)("40e00994b19f3f790f637c0c2072370762932feb6b",ej.callServer,void 0,ej.findSourceMapURL,"deleteTerritory");class e${async init(){return Promise.resolve()}async saveTerritory(e){try{await eD(e)}catch(e){throw console.error("Error saving territory:",e),e}}async getTerritories(){try{return await eT()}catch(e){throw console.error("Error loading territories:",e),e}}async getTerritory(e){try{return await ez(e)}catch(e){throw console.error("Error loading territory:",e),e}}async updateTerritory(e){try{await eI(e)}catch(e){throw console.error("Error updating territory:",e),e}}async deleteTerritory(e){try{await eO(e)}catch(e){throw console.error("Error deleting territory:",e),e}}async clearTerritories(){try{let e=await this.getTerritories();await Promise.all(e.map(e=>this.deleteTerritory(e.id)))}catch(e){throw console.error("Error clearing territories:",e),e}}}let eq=new e$,eH=(0,ej.createServerReference)("402f5c7634e945269b23ddcd80034b75f5ad0bc6a6",ej.callServer,void 0,ej.findSourceMapURL,"saveFollowUpData"),eG=(0,ej.createServerReference)("005878bd7b9ec5d068ff7492ff20cd2b41dce8f051",ej.callServer,void 0,ej.findSourceMapURL,"getAllFollowUps"),eV=(0,ej.createServerReference)("402bd90681f9fef537914d5515a2fad93583bde6c9",ej.callServer,void 0,ej.findSourceMapURL,"getFollowUp"),eZ=(0,ej.createServerReference)("4046a5d9c084c147454b384f3ad38c9fb0c048727b",ej.callServer,void 0,ej.findSourceMapURL,"getFollowUpsByPin"),e_=(0,ej.createServerReference)("60b2c68a71dcec78398ebf2868fcbba94bd3d8061a",ej.callServer,void 0,ej.findSourceMapURL,"getFollowUpsByDateRange"),eB=(0,ej.createServerReference)("405ddf3ec88f65735f73c1ee2e3c8fc88d7ecfba1e",ej.callServer,void 0,ej.findSourceMapURL,"updateFollowUp"),eX=(0,ej.createServerReference)("40ae230592c0bea19cc94f85ed964cfd13484572fa",ej.callServer,void 0,ej.findSourceMapURL,"deleteFollowUp"),eY=(0,ej.createServerReference)("403355c2bca24eec20cae393083927b45bfee7e10e",ej.callServer,void 0,ej.findSourceMapURL,"createFollowUp");class eW{async init(){return Promise.resolve()}async saveFollowUp(e){try{return await eH(e)}catch(e){throw console.error("Error saving follow-up:",e),e}}async getFollowUps(){try{return await eG()}catch(e){throw console.error("Error loading follow-ups:",e),e}}async getFollowUp(e){try{return await eV(e)}catch(e){throw console.error("Error loading follow-up:",e),e}}async getAllFollowUps(){try{return await eG()}catch(e){throw console.error("Error loading all follow-ups:",e),e}}async getFollowUpsByPin(e){try{return await eZ(e)}catch(e){throw console.error("Error loading follow-ups for pin:",e),e}}async getFollowUpsByDateRange(e,r){try{return await e_(e,r)}catch(e){throw console.error("Error loading follow-ups by date range:",e),e}}async updateFollowUp(e){try{return await eB(e)}catch(e){throw console.error("Error updating follow-up:",e),e}}async deleteFollowUp(e){try{await eX(e)}catch(e){throw console.error("Error deleting follow-up:",e),e}}async clearFollowUps(){try{let e=await this.getFollowUps();await Promise.all(e.map(e=>this.deleteFollowUp(e.id)))}catch(e){throw console.error("Error clearing follow-ups:",e),e}}async createFollowUp(e){try{return await eY(e)}catch(e){throw console.error("Error creating follow-up:",e),e}}}let eK=new eW;var eJ=t(3685),eQ=t(5665),e0=t(2135),e1=t(4266),e2=t(6463),e4=t(2980),e5=t(2422);class e3{async createPin(e){try{return await eJ.c(e)}catch(e){throw console.error("Error creating pin:",e),e}}async getAllPins(){try{return await eQ.I()}catch(e){throw console.error("Error loading pins:",e),e}}async getPin(e){try{return await e0.i(e)}catch(e){throw console.error("Error loading pin:",e),e}}async updatePin(e){try{return await e1.H(e)}catch(e){throw console.error("Error updating pin:",e),e}}async deletePin(e){try{await e2.t(e)}catch(e){throw console.error("Error deleting pin:",e),e}}async savePin(e){try{await e4.x(e)}catch(e){throw console.error("Error saving pin:",e),e}}async updatePinStatus(e,r){try{return await e5.t(e,r)}catch(e){throw console.error("Error updating pin status:",e),e}}}let e6=new e3;var e7=t(4896);function e9({setShowCalendarView:e,setShowTerritoryManager:r,setIsModalTransitioning:t}){return(0,l.useSearchParams)(),null}function e8({showCalendarView:e,setShowCalendarView:r,showTerritoryManager:t,setShowTerritoryManager:i,isModalTransitioning:o,setIsModalTransitioning:n}){let c=(0,l.useRouter)(),h=(0,s.useRef)(null),[b,P]=(0,s.useState)(null),[E,R]=(0,s.useState)([]),[L,F]=(0,s.useState)([]),[U,D]=(0,s.useState)(null),[T,z]=(0,s.useState)(""),[I,O]=(0,s.useState)(!1),[$,q]=(0,s.useState)(!1),[H,G]=(0,s.useState)(new Set),[V,Z]=(0,s.useState)(""),[_,B]=(0,s.useState)(""),[X,Y]=(0,s.useState)(null),[W,K]=(0,s.useState)(!1),[J,Q]=(0,s.useState)(!1),[er,et]=(0,s.useState)(!1),[ea,es]=(0,s.useState)(null),[el,ei]=(0,s.useState)([]),[eo,en]=(0,s.useState)([]),[ec,ep]=(0,s.useState)(!1),[eu,eh]=(0,s.useState)([]),[ef,eb]=(0,s.useState)([]),[ey,ej]=(0,s.useState)(new Set),[eN,eS]=(0,s.useState)(!1),[eC,eA]=(0,s.useState)([]),[eM,eP]=(0,s.useState)(null),[eE,eL]=(0,s.useState)(!1),[eF,eD]=(0,s.useState)(!1),{isOnline:eT}=ev(),ez=e=>{switch(e){case"not-interested":return"#ef4444";case"not-home":return"#eab308";case"follow-up":return"#3b82f6";case"onboarded":return"#22c55e";default:return"#6b7280"}},eI=(e,r)=>{let t=L.find(r=>r.id===e);if(t&&window.google&&window.google.maps){let a=E.find(r=>r.id===e);t.marker.setIcon({path:window.google.maps.SymbolPath.CIRCLE,scale:10,fillColor:ez(r),fillOpacity:1,strokeColor:a?.offline?"#ff6b6b":"#ffffff",strokeWeight:a?.offline?3:2})}},eO=async(e,r)=>{let t=E.map(t=>t.id===e?{...t,status:r,updatedAt:new Date,offline:!eT}:t);R(t);try{await e6.updatePinStatus(e,r),console.log("Pin status updated in database")}catch(e){console.error("Failed to update pin status in database:",e)}let a=t.find(r=>r.id===e);a&&await ek.savePin(a),eI(e,r),D(null)},e$=async e=>{try{let r=await eK.saveFollowUp(e);en(r=>[...r,e]),U&&eO(U.id,"follow-up"),Q(!1),(0,ee.oR)({title:"Follow-up Scheduled!",description:`Appointment saved to database for ${new Date(e.date).toLocaleDateString()} at ${e.time}`}),console.log("Follow-up saved to database:",r)}catch(r){if(console.error("Error saving follow-up:",r),eT)(0,ee.oR)({title:"Error",description:"Failed to save follow-up. Please try again.",variant:"destructive"});else{let r={...e,offline:!0};await ek.saveFollowUp(r),en(e=>[...e,r]),U&&eO(U.id,"follow-up"),Q(!1),(0,ee.oR)({title:"Follow-up Scheduled Offline",description:"Your follow-up has been saved locally and will sync when online."})}}},eH=()=>{K(!0)},eG=async e=>{try{let r=await e7.w.saveOnboardData({firstName:e.firstName,phone:e.phone,email:e.email,ownsCrypto:e.ownsCrypto,socials:e.socials,notes:e.notes,pinId:e.pinId,address:e.address,timestamp:e.timestamp});U&&eO(U.id,"onboarded");let t={...e,offline:!1};ei(e=>[...e,t]),es(t),K(!1),et(!0),(0,ee.oR)({title:"Success!",description:`${e.firstName} has been successfully onboarded and saved to database!`}),console.log("Customer saved to database:",r)}catch(r){if(console.error("Error saving customer:",r),eT)(0,ee.oR)({title:"Error",description:"Failed to onboard customer. Please try again.",variant:"destructive"});else{let r={...e,offline:!0};await ek.saveCustomer(r),ei(e=>[...e,r]),es(r),U&&eO(U.id,"onboarded"),K(!1),et(!0),(0,ee.oR)({title:"Customer Onboarded Offline",description:"Customer has been saved locally and will sync when online."})}}},eV=async(e,r)=>{try{let t={id:Date.now().toString(),name:e,color:r,coordinates:eC,createdAt:new Date,updatedAt:new Date};await eq.saveTerritory(t),eh(e=>[...e,t]),ej(e=>new Set([...e,t.id])),eS(!1),eA([]),(0,ee.oR)({title:"Territory Created!",description:`"${e}" has been created successfully.`})}catch(e){console.error("Error creating territory:",e),(0,ee.oR)({title:"Error",description:"Failed to create territory. Please try again.",variant:"destructive"})}},eZ=async e=>{try{await eq.updateTerritory(e),eh(r=>r.map(r=>r.id===e.id?e:r))}catch(e){console.error("Error updating territory:",e),(0,ee.oR)({title:"Error",description:"Failed to update territory. Please try again.",variant:"destructive"})}},e_=async e=>{try{await eq.deleteTerritory(e),eh(r=>r.filter(r=>r.id!==e)),ej(r=>{let t=new Set(r);return t.delete(e),t})}catch(e){console.error("Error deleting territory:",e),(0,ee.oR)({title:"Error",description:"Failed to delete territory. Please try again.",variant:"destructive"})}};return(0,a.jsxs)("div",{className:"h-screen flex flex-col bg-gradient-to-br from-purple-50 via-blue-50 to-pink-50 overflow-hidden touch-pan-y",children:[(0,a.jsxs)("div",{className:"bg-white/80 backdrop-blur-sm shadow-sm border-b border-purple-100 p-3 sm:p-4 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h1",{className:"text-lg sm:text-2xl font-bold bg-gradient-to-r from-purple-600 via-blue-600 to-pink-600 bg-clip-text text-transparent truncate flex-1 min-w-0",children:"PulseChain Education Tracker"}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[eT?(0,a.jsx)(N,{className:"h-4 w-4 text-green-600"}):(0,a.jsx)(k,{className:"h-4 w-4 text-red-600"}),(0,a.jsx)("span",{className:"text-xs text-gray-600 hidden sm:inline",children:eT?"Online":"Offline"})]})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[(0,a.jsxs)(f,{variant:"outline",className:"flex items-center gap-1 border-purple-200 text-purple-700",children:[(0,a.jsx)(j.A,{className:"h-3 w-3"}),E.length," Doors Knocked"]}),_&&(0,a.jsx)(f,{variant:"outline",className:"text-xs border-blue-200 text-blue-700 max-w-32 truncate",children:_}),eE&&(0,a.jsx)(f,{variant:"outline",className:"text-xs border-green-200 text-green-700",children:"Drawing Mode Active"})]}),(0,a.jsxs)("div",{className:"flex md:hidden items-center gap-2",children:[(0,a.jsxs)(f,{variant:"outline",className:"flex items-center gap-1 border-purple-200 text-purple-700 text-xs",children:[(0,a.jsx)(j.A,{className:"h-3 w-3"}),E.length]}),(0,a.jsx)(d,{variant:"outline",size:"sm",onClick:()=>ep(!ec),className:"border-purple-200 text-purple-700 hover:bg-purple-50",children:(0,a.jsx)(S,{className:"h-4 w-4"})})]})]}),ec&&(0,a.jsx)("div",{className:"md:hidden mt-3 p-3 bg-white/90 backdrop-blur-sm rounded-lg border border-purple-200 shadow-lg",children:(0,a.jsx)("div",{className:"space-y-2",children:_&&(0,a.jsx)(f,{variant:"outline",className:"w-full text-xs border-blue-200 text-blue-700 justify-center truncate",children:_})})})]}),(0,a.jsxs)("div",{className:"flex-1 relative min-h-0 touch-none",children:[V?(0,a.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-purple-100 via-blue-100 to-pink-100 p-4",children:(0,a.jsxs)(p,{className:"max-w-md w-full border-purple-200 shadow-lg",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(m,{className:"text-red-600 text-lg flex items-center gap-2",children:[!eT&&(0,a.jsx)(k,{className:"h-5 w-5"}),eT?"Google Maps Error":"Offline Mode"]})}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsx)("p",{className:"text-gray-700 text-sm",children:V}),eT?(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"To fix this issue:"}),(0,a.jsxs)("ol",{className:"list-decimal list-inside space-y-1 text-xs",children:[(0,a.jsxs)("li",{children:["Go to"," ",(0,a.jsx)("a",{href:"https://console.cloud.google.com/",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline",children:"Google Cloud Console"})]}),(0,a.jsx)("li",{children:"Create a new project or select an existing one"}),(0,a.jsxs)("li",{children:["Enable the following APIs:",(0,a.jsxs)("ul",{className:"list-disc list-inside ml-4 mt-1",children:[(0,a.jsx)("li",{children:"Maps JavaScript API"}),(0,a.jsx)("li",{children:"Geocoding API"}),(0,a.jsx)("li",{children:"Street View Static API"}),(0,a.jsx)("li",{children:"Maps Drawing API"})]})]}),(0,a.jsx)("li",{children:'Create an API key in "Credentials"'}),(0,a.jsx)("li",{children:"Add the API key to your environment variables"}),(0,a.jsx)("li",{children:"Restart your development server"})]})]}):(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[(0,a.jsx)("h4",{className:"font-semibold mb-2 text-sm",children:"Available offline features:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[(0,a.jsx)("li",{children:"View cached locations and data"}),(0,a.jsx)("li",{children:"Add new pins (will sync when online)"}),(0,a.jsx)("li",{children:"Schedule follow-ups"}),(0,a.jsx)("li",{children:"Onboard customers"}),(0,a.jsx)("li",{children:"View calendar"})]})]})]})]})}):(0,a.jsx)("div",{ref:h,className:"w-full h-full touch-none"}),!V&&(0,a.jsxs)(d,{onClick:()=>{if(!navigator.geolocation){(0,ee.oR)({title:"Geolocation Not Supported",description:"Your browser doesn't support geolocation.",variant:"destructive"});return}q(!0),navigator.geolocation.getCurrentPosition(e=>{let{latitude:r,longitude:t}=e.coords,a={lat:r,lng:t};Y(a),b&&window.google&&window.google.maps&&(b.setCenter(a),b.setZoom(16),new window.google.maps.Marker({position:a,map:b,title:"Your Location",icon:{path:window.google.maps.SymbolPath.CIRCLE,scale:8,fillColor:"#8b5cf6",fillOpacity:1,strokeColor:"#ffffff",strokeWeight:3}}),console.log("GPS location found:",a)),q(!1)},e=>{console.error("GPS error:",e);let r="Unable to get your location. ";switch(e.code){case e.PERMISSION_DENIED:r+="Location access was denied. Please enable location permissions.";break;case e.POSITION_UNAVAILABLE:r+="Location information is unavailable.";break;case e.TIMEOUT:r+="Location request timed out.";break;default:r+="An unknown error occurred."}(0,ee.oR)({title:"Location Error",description:r,variant:"destructive"}),q(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})},disabled:$,className:"absolute top-3 right-3 z-10 bg-white/90 backdrop-blur-sm text-purple-700 border border-purple-200 hover:bg-purple-50 shadow-lg",size:"sm",children:[$?(0,a.jsx)(C,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"hidden sm:inline ml-2",children:$?"Getting Location...":"My Location"})]}),I&&(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 backdrop-blur-sm flex items-center justify-center p-4",children:(0,a.jsx)("div",{className:"bg-white/90 backdrop-blur-sm p-4 rounded-lg border border-purple-200 shadow-lg max-w-xs w-full text-center",children:(0,a.jsx)("p",{className:"text-purple-700 text-sm",children:eT?"Loading address information...":"Saving location offline..."})})}),U&&!W&&!J&&!er&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",onClick:e=>{e.target===e.currentTarget&&D(null)},children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(m,{className:"flex items-center gap-2 text-purple-700 text-lg",children:[(e=>{switch(e){case"not-home":return(0,a.jsx)(g,{className:"h-4 w-4"});case"not-interested":return(0,a.jsx)(y,{className:"h-4 w-4"});case"follow-up":return(0,a.jsx)(v,{className:"h-4 w-4"});case"onboarded":return(0,a.jsx)(w,{className:"h-4 w-4"});default:return(0,a.jsx)(j.A,{className:"h-4 w-4"})}})(U.status),"Location Details",U.offline&&(0,a.jsx)(f,{variant:"outline",className:"text-xs border-orange-200 text-orange-700",children:"Offline"})]})}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[U.propertyName&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Property:"}),(0,a.jsx)("p",{className:"font-semibold text-base break-words",children:U.propertyName})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Address:"}),(0,a.jsx)("p",{className:"font-medium text-sm break-words",children:U.address}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1 break-all",children:[U.lat.toFixed(6),", ",U.lng.toFixed(6)]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"Street View:"}),(0,a.jsx)("img",{src:T||"/placeholder.svg?height=300&width=600",alt:"Street view",className:"w-full h-40 sm:h-48 object-cover rounded-lg border border-purple-200 shadow-sm",onError:e=>{e.target.src="/placeholder.svg?height=300&width=600"}}),!eT&&(0,a.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Street View unavailable offline"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,a.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>eO(U.id,"not-home"),className:"flex items-center gap-1 border-yellow-300 text-yellow-700 hover:bg-yellow-50 text-xs",children:[(0,a.jsx)(g,{className:"h-3 w-3"}),"Not Home"]}),(0,a.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>eO(U.id,"not-interested"),className:"flex items-center gap-1 border-red-300 text-red-700 hover:bg-red-50 text-xs",children:[(0,a.jsx)(y,{className:"h-3 w-3"}),"Not Interested"]}),(0,a.jsxs)(d,{variant:"outline",size:"sm",onClick:()=>{Q(!0)},className:"flex items-center gap-1 border-blue-300 text-blue-700 hover:bg-blue-50 bg-transparent text-xs",children:[(0,a.jsx)(v,{className:"h-3 w-3"}),"Follow-up"]}),(0,a.jsxs)(d,{variant:"outline",size:"sm",onClick:eH,className:"flex items-center gap-1 border-green-300 text-green-700 hover:bg-green-50 bg-transparent text-xs",children:[(0,a.jsx)(w,{className:"h-3 w-3"}),"Onboarded"]})]}),(0,a.jsxs)(d,{className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-sm",onClick:eH,children:[(0,a.jsx)(M,{className:"h-4 w-4 mr-2"}),"Create New Onboard"]}),(0,a.jsx)(d,{variant:"outline",className:"w-full bg-transparent border-purple-200 text-purple-700 hover:bg-purple-50 text-sm",onClick:()=>{console.log("Closing modal"),D(null)},children:"Close"})]})]})]})}),J&&U&&(0,a.jsx)(ex,{pin:U,onSave:e$,onCancel:()=>{Q(!1)}}),e&&(0,a.jsx)(eg,{followUps:eo,onClose:()=>{r(!1);let e=new URLSearchParams(window.location.search);e.delete("view");let t=e.toString()?`/?${e.toString()}`:"/";c.replace(t)}}),W&&U&&(0,a.jsx)(ed,{pin:U,onSubmit:eG,onCancel:()=>{K(!1)}}),er&&ea&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 backdrop-blur-sm flex items-center justify-center p-4 z-50",children:(0,a.jsxs)("div",{className:"relative w-full max-w-md",children:[(0,a.jsx)(em.Z,{spread:40,glow:!0,disabled:!1,proximity:64,inactiveZone:.01}),(0,a.jsxs)(p,{className:"bg-white/95 backdrop-blur-sm border-purple-200 shadow-xl",children:[(0,a.jsx)(u,{children:(0,a.jsxs)(m,{className:"flex items-center gap-2 text-green-600 text-lg",children:[(0,a.jsx)(w,{className:"h-6 w-6"}),"Onboarding Complete!",ea.offline&&(0,a.jsx)(f,{variant:"outline",className:"text-xs border-orange-200 text-orange-700",children:"Saved Offline"})]})}),(0,a.jsxs)(x,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-lg font-semibold break-words",children:ea.firstName}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"has been successfully onboarded"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1 break-words",children:ea.address}),ea.offline&&(0,a.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Data will sync when online"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)(d,{variant:"outline",className:"flex-1 bg-transparent border-purple-200 text-purple-700 hover:bg-purple-50 text-sm",onClick:()=>{et(!1),D(null),es(null)},children:"Back To Map"}),(0,a.jsx)(d,{className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-sm",onClick:()=>{et(!1),D(null),alert(`Viewing profile for ${ea?.firstName}`),es(null)},children:"View Profile"})]})]})]})]})})]}),t&&(0,a.jsx)(eR,{territories:eu,onClose:()=>{i(!1);let e=new URLSearchParams(window.location.search);e.delete("view");let r=e.toString()?`/?${e.toString()}`:"/";c.replace(r)},onUpdateTerritory:eZ,onDeleteTerritory:e_,onToggleTerritoryVisibility:e=>{ej(r=>{let t=new Set(r);return t.has(e)?t.delete(e):t.add(e),t})},visibleTerritories:ey}),eN&&(0,a.jsx)(eU,{coordinates:eC,onSave:eV,onCancel:()=>{eS(!1),eA([])}}),(0,a.jsx)(ew,{})]})}function re(){let[e,r]=(0,s.useState)(!1),[t,l]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1);return(0,a.jsxs)("div",{children:[(0,a.jsx)(s.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading..."}),children:(0,a.jsx)(e9,{setShowCalendarView:r,setShowTerritoryManager:l,setIsModalTransitioning:o})}),(0,a.jsx)(e8,{showCalendarView:e,setShowCalendarView:r,showTerritoryManager:t,setShowTerritoryManager:l,isModalTransitioning:i,setIsModalTransitioning:o})]})}},6330:e=>{"use strict";e.exports=require("@prisma/client")},6463:(e,r,t)=>{"use strict";t.d(r,{t:()=>s});var a=t(7001);let s=(0,a.createServerReference)("40fcd747120242de1f8cbcda2aa39ef6327b55f509",a.callServer,void 0,a.findSourceMapURL,"deletePin")},8480:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>u,tree:()=>c});var a=t(7025),s=t(8198),l=t(2576),i=t.n(l),o=t(5239),n={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);t.d(r,n);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9225)),"/Users/kyle/HEXCRM-MAP/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,9650)),"/Users/kyle/HEXCRM-MAP/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,4540,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(t.t.bind(t,3117,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(t.t.bind(t,6874,23)),"next/dist/client/components/unauthorized-error"]}],d=["/Users/kyle/HEXCRM-MAP/app/page.tsx"],p={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9225:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>a});let a=(0,t(1129).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/kyle/HEXCRM-MAP/app/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/kyle/HEXCRM-MAP/app/page.tsx","default")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9913:(e,r,t)=>{Promise.resolve().then(t.bind(t,5970))}};var r=require("../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[810,62,914,31],()=>t(8480));module.exports=a})();